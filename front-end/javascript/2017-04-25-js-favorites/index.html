<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.lichao.xin","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"3ZZ8ITB7HE","apiKey":"062eb5a54afbcbf3f20452d58fc40035","indexName":"xinlc","hits":{"per_page":10},"labels":{"input_placeholder":"搜索","hits_empty":"未发现与「${query}」相关的内容","hits_stats":"${hits} 条相关条目，使用了 ${time} 毫秒"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="JavaScript 常用代码片段 document ready123456789101112131415161718192021const ready &#x3D; function() &amp;#123;  &#x2F;&#x2F; ...&amp;#125;;const completed &#x3D; function() &amp;#123;  document.removeEventListener(&quot;DOMContentLoaded&quot;, com">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 常用代码片段">
<meta property="og:url" content="https://blog.lichao.xin/front-end/javascript/2017-04-25-js-favorites/index.html">
<meta property="og:site_name" content="Richard Xin&#39;s Blog">
<meta property="og:description" content="JavaScript 常用代码片段 document ready123456789101112131415161718192021const ready &#x3D; function() &amp;#123;  &#x2F;&#x2F; ...&amp;#125;;const completed &#x3D; function() &amp;#123;  document.removeEventListener(&quot;DOMContentLoaded&quot;, com">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-04-25T02:00:00.000Z">
<meta property="article:modified_time" content="2021-06-14T01:33:22.399Z">
<meta property="article:author" content="Richard">
<meta property="article:tag" content="js">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.lichao.xin/front-end/javascript/2017-04-25-js-favorites/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JavaScript 常用代码片段 | Richard Xin's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4530ac9d0bc4e258535c4a9b17029f0c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Richard Xin's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Richard Xin's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Quick notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">132</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">59</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.lichao.xin/front-end/javascript/2017-04-25-js-favorites/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/18113256?v=3&s=460">
      <meta itemprop="name" content="Richard">
      <meta itemprop="description" content="惶者生存，偏执者成功">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Richard Xin's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaScript 常用代码片段
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-25 02:00:00" itemprop="dateCreated datePublished" datetime="2017-04-25T02:00:00+00:00">2017-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-06-14 01:33:22" itemprop="dateModified" datetime="2021-06-14T01:33:22+00:00">2021-06-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="JavaScript-常用代码片段"><a href="#JavaScript-常用代码片段" class="headerlink" title="JavaScript 常用代码片段"></a>JavaScript 常用代码片段</h2><hr>
<h2 id="document-ready"><a href="#document-ready" class="headerlink" title="document ready"></a>document ready</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ready = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> completed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.removeEventListener(<span class="string">"DOMContentLoaded"</span>, completed);</span><br><span class="line">  <span class="built_in">window</span>.removeEventListener(<span class="string">"load"</span>, completed);</span><br><span class="line">  ready();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  <span class="built_in">document</span>.readyState === <span class="string">"complete"</span> ||</span><br><span class="line">  (<span class="built_in">document</span>.readyState !== <span class="string">"loading"</span> &amp;&amp; !<span class="built_in">document</span>.documentElement.doScroll)</span><br><span class="line">) &#123;</span><br><span class="line">  <span class="comment">// Handle it asynchronously to allow scripts the opportunity to delay ready</span></span><br><span class="line">  <span class="built_in">window</span>.setTimeout(ready);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// Use the handy event callback</span></span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, completed);</span><br><span class="line">  <span class="comment">// A fallback to window.onload, that will always work</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, completed);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h2 id="HTML5-图片压缩-或使用localResizeIMG"><a href="#HTML5-图片压缩-或使用localResizeIMG" class="headerlink" title="HTML5 图片压缩 或使用localResizeIMG"></a>HTML5 图片压缩 或使用<a href="https://github.com/think2011/localResizeIMG" target="_blank" rel="noopener">localResizeIMG</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"><span class="keyword">const</span> file = files[<span class="number">0</span>].file;</span><br><span class="line"><span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader(); <span class="comment">// 读取客户端上的文件</span></span><br><span class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> url = reader.result; <span class="comment">// 读取到的文件内容.这个属性只在读取操作完成之后才有效,并且数据的格式取决于读取操作是由哪个方法发起的.所以必须使用reader.onload，</span></span><br><span class="line">  image.src = url; <span class="comment">// reader读取的文件内容是base64,利用这个url就能实现上传前预览图片</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> w = image.naturalWidth,</span><br><span class="line">    h = image.naturalHeight;</span><br><span class="line">  canvas.width = w;</span><br><span class="line">  canvas.height = h;</span><br><span class="line">  ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, w, h, <span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">  <span class="keyword">var</span> adata = canvas.toDataURL(<span class="string">"image/jpeg"</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(adata.length);</span><br><span class="line">&#125;;</span><br><span class="line">reader.readAsDataURL(file);</span><br></pre></td></tr></table></figure>

<h2 id="js-获取-search-参数"><a href="#js-获取-search-参数" class="headerlink" title="js 获取 search 参数"></a>js 获取 search 参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.getUrlParam = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>); <span class="comment">//构造一个含有目标参数的正则表达式对象</span></span><br><span class="line">  <span class="keyword">var</span> r = <span class="built_in">window</span>.location.search.substr(<span class="number">1</span>).match(reg); <span class="comment">//匹配目标参数</span></span><br><span class="line">  <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">decodeURI</span>(r[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">//返回参数值</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getUrlParameters = <span class="function"><span class="params">url</span> =&gt;</span></span><br><span class="line">  url</span><br><span class="line">    .match(<span class="regexp">/([^?=&amp;]+)(=([^&amp;]*))/g</span>)</span><br><span class="line">    .reduce(</span><br><span class="line">      (a, v) =&gt; (</span><br><span class="line">        (a[v.slice(<span class="number">0</span>, v.indexOf(<span class="string">"="</span>))] = v.slice(v.indexOf(<span class="string">"="</span>) + <span class="number">1</span>)), a</span><br><span class="line">      ),</span><br><span class="line">      &#123;&#125;</span><br><span class="line">    );</span><br><span class="line"><span class="comment">// getUrlParameters('http://url.com/page?name=Adam&amp;surname=Smith') -&gt; &#123;name: 'Adam', surname: 'Smith'&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="获得-URL-中-GET-参数值"><a href="#获得-URL-中-GET-参数值" class="headerlink" title="获得 URL 中 GET 参数值"></a>获得 URL 中 GET 参数值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用法：如果地址是 test.htm?t1=1&amp;t2=2&amp;t3=3, 那么能取得：GET["t1"], GET["t2"], GET["t3"]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_get</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  querystr = <span class="built_in">window</span>.location.href.split(<span class="string">"?"</span>);</span><br><span class="line">  <span class="keyword">if</span> (querystr[<span class="number">1</span>]) &#123;</span><br><span class="line">    GETs = querystr[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</span><br><span class="line">    GET = [];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; GETs.length; i++) &#123;</span><br><span class="line">      tmp_arr = GETs.split(<span class="string">"="</span>);</span><br><span class="line">      key = tmp_arr[<span class="number">0</span>];</span><br><span class="line">      GET[key] = tmp_arr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> querystr[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="阻止事件冒泡"><a href="#阻止事件冒泡" class="headerlink" title="阻止事件冒泡"></a>阻止事件冒泡</h2><p><a href="http://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false" target="_blank" rel="noopener">return false</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// event.preventDefault()会阻挡预设要发生的事件.</span></span><br><span class="line"><span class="comment">// event.stopPropagation()会阻挡发生冒泡事件.</span></span><br><span class="line"><span class="comment">// 而return false则是前面两者的事情他都会做：</span></span><br><span class="line"><span class="comment">// 他会做event.preventDefault();</span></span><br><span class="line"><span class="comment">// 他会做event.stopPropagation();</span></span><br><span class="line"><span class="comment">// 停止callback function的执行并且立即return回来</span></span><br></pre></td></tr></table></figure>

<h2 id="js-自定义事件-参考"><a href="#js-自定义事件-参考" class="headerlink" title="js 自定义事件 参考"></a>js 自定义事件 <a href="http://www.zhangxinxu.com/wordpress/2012/04/js-dom自定义事件/" target="_blank" rel="noopener">参考</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义dom 事件</span></span><br><span class="line"><span class="comment"> * EventUtil  全局接口</span></span><br><span class="line"><span class="comment"> * addEvent</span></span><br><span class="line"><span class="comment"> * fireEvent</span></span><br><span class="line"><span class="comment"> * removeEvent</span></span><br><span class="line"><span class="comment"> * Created by lichao on 17/03/30.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Polyfill CustomEvent</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span>.CustomEvent === <span class="string">"function"</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">CustomEvent</span>(<span class="params">event, params</span>) </span>&#123;</span><br><span class="line">    params = params || &#123;</span><br><span class="line">      bubbles: <span class="literal">false</span>,</span><br><span class="line">      cancelable: <span class="literal">false</span>,</span><br><span class="line">      detail: <span class="literal">undefined</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> evt = <span class="built_in">document</span>.createEvent(<span class="string">"CustomEvent"</span>);</span><br><span class="line">    evt.initCustomEvent(</span><br><span class="line">      event,</span><br><span class="line">      params.bubbles,</span><br><span class="line">      params.cancelable,</span><br><span class="line">      params.detail</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> evt;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  CustomEvent.prototype = <span class="built_in">window</span>.Event.prototype;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.CustomEvent = CustomEvent;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Event</span></span><br><span class="line"><span class="keyword">const</span> Event = <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> _Event(el);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> _Event = <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.el = el &amp;&amp; el.nodeType == <span class="number">1</span> ? el : <span class="built_in">document</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">_Event.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: this,</span><br><span class="line">  addEvent: function(type, fn, capture) &#123;</span><br><span class="line">    <span class="keyword">this</span>.el.addEventListener(type, fn, capture);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  fireEvent: <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ev = <span class="keyword">new</span> CustomEvent(type);</span><br><span class="line">    <span class="keyword">this</span>.el.dispatchEvent(ev);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  removeEvent: <span class="function"><span class="keyword">function</span>(<span class="params">type, fn, capture</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el.removeEventListener(type, fn, capture || <span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// window.EventUtil = Event; // 全局接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Event;</span><br></pre></td></tr></table></figure>

<h2 id="js-高精度计算"><a href="#js-高精度计算" class="headerlink" title="js 高精度计算"></a>js 高精度计算</h2><p>建议使用<a href="https://github.com/MikeMcl/decimal.js" target="_blank" rel="noopener">decimal.js</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//除法函数，用来得到精确的除法结果</span></span><br><span class="line"><span class="comment">//说明：javascript的除法结果会有误差，在两个浮点数相除的时候会比较明显。这个函数返回较为精确的除法结果。</span></span><br><span class="line"><span class="comment">//调用：accDiv(arg1,arg2)</span></span><br><span class="line"><span class="comment">//返回值：arg1除以arg2的精确结果</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accDiv</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t1 = <span class="number">0</span>,</span><br><span class="line">    t2 = <span class="number">0</span>,</span><br><span class="line">    r1,</span><br><span class="line">    r2;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    t1 = arg1.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    t2 = arg2.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">  <span class="keyword">with</span> (<span class="built_in">Math</span>) &#123;</span><br><span class="line">    r1 = <span class="built_in">Number</span>(arg1.toString().replace(<span class="string">"."</span>, <span class="string">""</span>));</span><br><span class="line">    r2 = <span class="built_in">Number</span>(arg2.toString().replace(<span class="string">"."</span>, <span class="string">""</span>));</span><br><span class="line">    <span class="keyword">return</span> (r1 / r2) * pow(<span class="number">10</span>, t2 - t1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给Number类型增加一个div方法，调用起来更加方便。</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.div = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accDiv(<span class="keyword">this</span>, arg);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//乘法函数，用来得到精确的乘法结果</span></span><br><span class="line"><span class="comment">//说明：javascript的乘法结果会有误差，在两个浮点数相乘的时候会比较明显。这个函数返回较为精确的乘法结果。</span></span><br><span class="line"><span class="comment">//调用：accMul(arg1,arg2)</span></span><br><span class="line"><span class="comment">//返回值：arg1乘以arg2的精确结果</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accMul</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> m = <span class="number">0</span>,</span><br><span class="line">    s1 = arg1.toString(),</span><br><span class="line">    s2 = arg2.toString();</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    m += s1.split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    m += s2.split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    (<span class="built_in">Number</span>(s1.replace(<span class="string">"."</span>, <span class="string">""</span>)) * <span class="built_in">Number</span>(s2.replace(<span class="string">"."</span>, <span class="string">""</span>))) /</span><br><span class="line">    <span class="built_in">Math</span>.pow(<span class="number">10</span>, m)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给Number类型增加一个mul方法，调用起来更加方便。</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.mul = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accMul(arg, <span class="keyword">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//加法函数，用来得到精确的加法结果</span></span><br><span class="line"><span class="comment">//说明：javascript的加法结果会有误差，在两个浮点数相加的时候会比较明显。这个函数返回较为精确的加法结果。</span></span><br><span class="line"><span class="comment">//调用：accAdd(arg1,arg2)</span></span><br><span class="line"><span class="comment">//返回值：arg1加上arg2的精确结果</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accAdd</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> r1, r2, m;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    r1 = arg1.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    r1 = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    r2 = arg2.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    r2 = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  m = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(r1, r2));</span><br><span class="line">  <span class="keyword">return</span> (arg1 * m + arg2 * m) / m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给Number类型增加一个add方法，调用起来更加方便。</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.add = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> accAdd(arg, <span class="keyword">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在你要用的地方包含这些函数，然后调用它来计算就可以了。</span></span><br><span class="line"><span class="comment">//比如你要计算：7*0.8 ，则改成 (7).mul(8)</span></span><br><span class="line"><span class="comment">//其它运算类似，就可以得到比较精确的结果。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//减法函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Subtr</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> r1, r2, m, n;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    r1 = arg1.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    r1 = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    r2 = arg2.toString().split(<span class="string">"."</span>)[<span class="number">1</span>].length;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    r2 = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  m = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(r1, r2));</span><br><span class="line">  <span class="comment">//last modify by deeka</span></span><br><span class="line">  <span class="comment">//动态控制精度长度</span></span><br><span class="line">  n = r1 &gt;= r2 ? r1 : r2;</span><br><span class="line">  <span class="keyword">return</span> ((arg1 * m - arg2 * m) / m).toFixed(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="根据生日计算星座"><a href="#根据生日计算星座" class="headerlink" title="根据生日计算星座"></a>根据生日计算星座</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Richard：根据生日计算星座</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;[type]&#125;</span> </span>birthday [description]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;[type]&#125;</span>          </span>[description]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Utils.calConstellation = <span class="function"><span class="params">birthday</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (birthday == <span class="literal">null</span> || birthday == <span class="string">""</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(birthday); <span class="comment">// new Date(String(birthday).replace(/\-/g,'/'));</span></span><br><span class="line">  <span class="keyword">const</span> month = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> day = date.getDate();</span><br><span class="line">  <span class="keyword">const</span> s =</span><br><span class="line">    <span class="string">"魔羯座水瓶座双鱼座牡羊座金牛座双子座巨蟹座狮子座处女座天秤座天蝎座射手座魔羯座"</span>;</span><br><span class="line">  <span class="keyword">const</span> arr = [<span class="number">20</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">23</span>, <span class="number">22</span>, <span class="number">22</span>];</span><br><span class="line">  <span class="keyword">return</span> s.substr(month * <span class="number">3</span> - (day &lt; arr[month - <span class="number">1</span>] ? <span class="number">3</span> : <span class="number">0</span>), <span class="number">3</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="计算年龄"><a href="#计算年龄" class="headerlink" title="计算年龄"></a>计算年龄</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Utils.calAge = <span class="function"><span class="params">birthday</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (birthday) &#123;</span><br><span class="line">    <span class="keyword">const</span> aDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">const</span> thisYear = aDate.getFullYear();</span><br><span class="line">    <span class="keyword">const</span> thisMonth = aDate.getMonth() + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> thisDay = aDate.getDate();</span><br><span class="line">    <span class="keyword">const</span> brith = <span class="keyword">new</span> <span class="built_in">Date</span>(birthday); <span class="comment">// new Date(String(birthday).replace(/\-/g,'/'));</span></span><br><span class="line">    <span class="keyword">const</span> brithy = brith.getFullYear();</span><br><span class="line">    <span class="keyword">const</span> brithm = brith.getMonth() + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> brithd = brith.getDate();</span><br><span class="line">    <span class="keyword">if</span> (thisYear - brithy &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (thisMonth - brithm &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        age = thisYear - brithy;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (thisMonth - brithm &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        age = thisYear - brithy - <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (thisDay - brithd &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        age = thisYear - brithy;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        age = thisYear - brithy - <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">String</span>(age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="格式化-Date-建议使用-moment"><a href="#格式化-Date-建议使用-moment" class="headerlink" title="格式化 Date (建议使用 moment)"></a>格式化 Date (<a href="https://github.com/moment/moment/" target="_blank" rel="noopener">建议使用 moment</a>)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;Date&#125;</span> <span class="variable">date</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> <span class="variable">fmt</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;String&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Utils.dateFormat = <span class="function">(<span class="params">date, fmt = <span class="string">"yyyy-MM-dd"</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(date) === <span class="string">"[object String]"</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (date.indexOf(<span class="string">"-"</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="comment">// 为了兼容ios 日期必须把 yyyy-mm-dd 转换为 yyyy/mm/dd</span></span><br><span class="line">      date = date.replace(<span class="regexp">/\-/g</span>, <span class="string">"/"</span>); <span class="comment">// eslint-disable-line</span></span><br><span class="line">      <span class="keyword">if</span> (date.lastIndexOf(<span class="string">"."</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="comment">// 去掉毫秒</span></span><br><span class="line">        date = date.substring(<span class="number">0</span>, date.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(date) !== <span class="string">"[object Date]"</span>) &#123;</span><br><span class="line">    date = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> o = &#123;</span><br><span class="line">    <span class="string">"M+"</span>: date.getMonth() + <span class="number">1</span>, <span class="comment">// 月份</span></span><br><span class="line">    <span class="string">"d+"</span>: date.getDate(), <span class="comment">// 日</span></span><br><span class="line">    <span class="string">"h+"</span>: date.getHours(), <span class="comment">// 小时</span></span><br><span class="line">    <span class="string">"m+"</span>: date.getMinutes(), <span class="comment">// 分</span></span><br><span class="line">    <span class="string">"s+"</span>: date.getSeconds(), <span class="comment">// 秒</span></span><br><span class="line">    <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((date.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">// 季度</span></span><br><span class="line">    S: date.getMilliseconds() <span class="comment">// 毫秒</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) &#123;</span><br><span class="line">    fmt = fmt.replace(</span><br><span class="line">      <span class="built_in">RegExp</span>.$<span class="number">1</span>,</span><br><span class="line">      <span class="string">`<span class="subst">$&#123;date.getFullYear()&#125;</span>`</span>.substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">`(<span class="subst">$&#123;k&#125;</span>)`</span>).test(fmt)) &#123;</span><br><span class="line">      fmt = fmt.replace(</span><br><span class="line">        <span class="built_in">RegExp</span>.$<span class="number">1</span>,</span><br><span class="line">        <span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span> ? o[k] : <span class="string">`00<span class="subst">$&#123;o[k]&#125;</span>`</span>.substr(<span class="string">`<span class="subst">$&#123;o[k]&#125;</span>`</span>.length)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fmt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Date-diff"><a href="#Date-diff" class="headerlink" title="Date diff"></a>Date diff</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String&#125;</span> </span>strInterval &#123;y|m|w|d|h|n|s&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String|Date&#125;</span> <span class="variable">dtStart</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String|Date&#125;</span> <span class="variable">dtEnd</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Utils.dateDiff = <span class="function">(<span class="params">strInterval, start, end</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> toDate = <span class="function"><span class="params">date</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(date) === <span class="string">"[object String]"</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (date.indexOf(<span class="string">"-"</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="comment">// 为了兼容ios 日期必须把 yyyy-mm-dd 转换为 yyyy/mm/dd</span></span><br><span class="line">        date = date.replace(<span class="regexp">/\-/g</span>, <span class="string">"/"</span>); <span class="comment">// eslint-disable-line</span></span><br><span class="line">        <span class="keyword">if</span> (date.lastIndexOf(<span class="string">"."</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">          <span class="comment">// 去掉毫秒</span></span><br><span class="line">          date = date.substring(<span class="number">0</span>, date.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(date) !== <span class="string">"[object Date]"</span>) &#123;</span><br><span class="line">      date = <span class="keyword">new</span> <span class="built_in">Date</span>(date);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> date;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dtStart = toDate(start);</span><br><span class="line">  <span class="keyword">const</span> dtEnd = toDate(end);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (strInterval) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"s"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"n"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">60000</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"h"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">3600000</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"d"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / <span class="number">86400000</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"w"</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">parseInt</span>((dtEnd - dtStart) / (<span class="number">86400000</span> * <span class="number">7</span>));</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"m"</span>:</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        dtEnd.getMonth() +</span><br><span class="line">        <span class="number">1</span> +</span><br><span class="line">        (dtEnd.getFullYear() - dtStart.getFullYear()) * <span class="number">12</span> -</span><br><span class="line">        (dtStart.getMonth() + <span class="number">1</span>)</span><br><span class="line">      );</span><br><span class="line">    <span class="comment">// return dtEnd.getMonth() - dtStart.getMonth();</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">"y"</span>:</span><br><span class="line">      <span class="keyword">return</span> dtEnd.getFullYear() - dtStart.getFullYear();</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="截取字符串并支持emoji"><a href="#截取字符串并支持emoji" class="headerlink" title="截取字符串并支持emoji"></a>截取字符串并支持<code>emoji</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支持4个字节 emoji</span></span><br><span class="line">Utils.StringToArray = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> length = str.length;</span><br><span class="line">  <span class="keyword">const</span> output = [];</span><br><span class="line">  <span class="keyword">while</span> (index &lt; length) &#123;</span><br><span class="line">    <span class="keyword">const</span> charCode = str.charCodeAt(index);</span><br><span class="line">    <span class="keyword">const</span> character = str.charAt(index);</span><br><span class="line">    <span class="keyword">if</span> (charCode &gt;= <span class="number">0xD800</span> &amp;&amp; charCode &lt;= <span class="number">0xDBFF</span>) &#123;</span><br><span class="line">      output.push(character + str.charAt(++index));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      output.push(character);</span><br><span class="line">    &#125;</span><br><span class="line">    index++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> output;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Utils.limitStr = <span class="function">(<span class="params">str = <span class="string">''</span>, length</span>) =&gt;</span> &#123;</span><br><span class="line">  str = str.trim().replace(<span class="string">'\n'</span>, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">const</span> arr = Utils.StringToArray(str);</span><br><span class="line">  <span class="keyword">return</span> arr.length &gt; length ? <span class="string">`<span class="subst">$&#123;arr.splice(<span class="number">0</span>, length).join(<span class="string">''</span>)&#125;</span>...`</span> : str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一种</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cutstr</span>(<span class="params">str, len</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp,</span><br><span class="line">        icount = <span class="number">0</span>,</span><br><span class="line">        patrn = <span class="regexp">/[^\x00-\xff]/</span>，</span><br><span class="line">        strre = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (icount &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">            temp = str.substr(i, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (patrn.exec(temp) == <span class="literal">null</span>) &#123;</span><br><span class="line">                   icount = icount + <span class="number">1</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                icount = icount + <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">            strre += temp</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> strre + <span class="string">"..."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生成-UUID"><a href="#生成-UUID" class="headerlink" title="生成 UUID"></a>生成 UUID</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Utils.generateUUID = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">const</span> uuid = <span class="string">"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"</span>.replace(<span class="regexp">/[xy]/g</span>, c =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> r = (d + <span class="built_in">Math</span>.random() * <span class="number">16</span>) % <span class="number">16</span> | <span class="number">0</span>; <span class="comment">// eslint-disable-line</span></span><br><span class="line">    d = <span class="built_in">Math</span>.floor(d / <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> (c == <span class="string">"x"</span> ? r : (r &amp; <span class="number">0x7</span>) | <span class="number">0x8</span>).toString(<span class="number">16</span>); <span class="comment">// eslint-disable-line</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> uuid;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="生成-4-位-id"><a href="#生成-4-位-id" class="headerlink" title="生成 4 位 id"></a>生成 4 位 id</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = (((<span class="number">1</span> + <span class="built_in">Math</span>.random()) * <span class="number">0x10000</span>) | <span class="number">0</span>).toString(<span class="number">16</span>).substring(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h2 id="js-对象深拷贝"><a href="#js-对象深拷贝" class="headerlink" title="js 对象深拷贝"></a>js 对象深拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Utils.deepCopy = <span class="function">(<span class="params">p, _c</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = _c || &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">in</span> p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!p.hasOwnProperty(i)) &#123;</span><br><span class="line">      <span class="comment">// eslint-disable-line</span></span><br><span class="line">      <span class="keyword">continue</span>; <span class="comment">// eslint-disable-line</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> p[i] === <span class="string">"object"</span>) &#123;</span><br><span class="line">      c[i] = p[i].constructor === <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">      Utils.deepCopy(p[i], c[i]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      c[i] = p[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> c;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="返回指定范围的随机数-m-n-之间-的公式"><a href="#返回指定范围的随机数-m-n-之间-的公式" class="headerlink" title="返回指定范围的随机数(m-n 之间)的公式"></a>返回指定范围的随机数(m-n 之间)的公式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.random() * (n - m) + m);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> randomInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.random() * (max - min) + min;</span><br><span class="line"><span class="comment">// randomInRange(2,10) -&gt; 6.0211363285087005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> randomIntegerInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line"><span class="comment">// randomIntegerInRange(0, 5) -&gt; 2</span></span><br></pre></td></tr></table></figure>

<h2 id="随机数时间戳"><a href="#随机数时间戳" class="headerlink" title="随机数时间戳"></a>随机数时间戳</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniqueId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">Math</span>.random,</span><br><span class="line">    b = <span class="built_in">parseInt</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()).toString() + b(<span class="number">10</span> * a()) + b(<span class="number">10</span> * a()) + b(<span class="number">10</span> * a())</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="防止被-Iframe-嵌套"><a href="#防止被-Iframe-嵌套" class="headerlink" title="防止被 Iframe 嵌套"></a>防止被 Iframe 嵌套</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (top != self) &#123;</span><br><span class="line">  location.href = <span class="string">"about:blank"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="iOS，Safari-浏览器，input-等表单-focus-后-fixed-元素错位问题"><a href="#iOS，Safari-浏览器，input-等表单-focus-后-fixed-元素错位问题" class="headerlink" title="iOS，Safari 浏览器，input 等表单 focus 后 fixed 元素错位问题"></a><a href="https://www.snip2code.com/Snippet/176582/--iOS-Safari----input---focus-fixed-----" target="_blank" rel="noopener">iOS，Safari 浏览器，input 等表单 focus 后 fixed 元素错位问题</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="regexp">/iPhone|iPod|iPad/i</span>.test(navigator.userAgent)) &#123;</span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">"focus"</span>, <span class="string">"input, textarea"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"header"</span>).css(<span class="string">"position"</span>, <span class="string">"absolute"</span>);</span><br><span class="line">    $(<span class="string">"footer"</span>).css(<span class="string">"position"</span>, <span class="string">"absolute"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">"blur"</span>, <span class="string">"input, textarea"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"header"</span>).css(<span class="string">"position"</span>, <span class="string">"fixed"</span>);</span><br><span class="line">    $(<span class="string">"footer"</span>).css(<span class="string">"position"</span>, <span class="string">"fixed"</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="得到地理位置"><a href="#得到地理位置" class="headerlink" title="得到地理位置"></a>得到地理位置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (navigator.geolocation) &#123;</span><br><span class="line">    navigator.geolocation.getCurrentPosition(</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">p</span>) </span>&#123;</span><br><span class="line">        callback(p.coords.latitude, p.coords.longitude);</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> msg = e.code + <span class="string">"\n"</span> + e.message;</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取-js-所在路径"><a href="#获取-js-所在路径" class="headerlink" title="获取 js 所在路径"></a>获取 js 所在路径</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getJsDir</span>(<span class="params">src</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> script = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (src) &#123;</span><br><span class="line">    script = [].filter.call(<span class="built_in">document</span>.scripts, <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> v.src.indexOf(src) !== <span class="number">-1</span>;</span><br><span class="line">    &#125;)[<span class="number">0</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    script = <span class="built_in">document</span>.scripts[<span class="built_in">document</span>.scripts.length - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> script ? script.src.substr(<span class="number">0</span>, script.src.lastIndexOf(<span class="string">"/"</span>)) : script;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="从全局捕获错误"><a href="#从全局捕获错误" class="headerlink" title="从全局捕获错误"></a>从全局捕获错误</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  errMsg,</span></span></span><br><span class="line"><span class="function"><span class="params">  scriptURI,</span></span></span><br><span class="line"><span class="function"><span class="params">  lineNumber,</span></span></span><br><span class="line"><span class="function"><span class="params">  columnNumber,</span></span></span><br><span class="line"><span class="function"><span class="params">  errorObj</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rst = &#123;</span><br><span class="line">      <span class="string">"错误信息："</span>: errMsg,</span><br><span class="line">      <span class="string">"出错文件："</span>: scriptURI,</span><br><span class="line">      <span class="string">"出错行号："</span>: lineNumber,</span><br><span class="line">      <span class="string">"出错列号："</span>: columnNumber,</span><br><span class="line">      <span class="string">"错误详情："</span>: errorObj</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    alert(<span class="built_in">JSON</span>.stringify(rst, <span class="literal">null</span>, <span class="number">10</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="转义-html-标签"><a href="#转义-html-标签" class="headerlink" title="转义 html 标签"></a>转义 html 标签</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HtmlEncode</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> text</span><br><span class="line">    .replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;"</span>)</span><br><span class="line">    .replace(<span class="regexp">/\"/g</span>, <span class="string">'"'</span>)</span><br><span class="line">    .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&lt;"</span>)</span><br><span class="line">    .replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&gt;"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="cookie-操作"><a href="#cookie-操作" class="headerlink" title="cookie 操作"></a>cookie 操作</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置cookie值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, Hours</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">var</span> offset = <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">var</span> utc = d.getTime() + d.getTimezoneOffset() * <span class="number">60000</span>;</span><br><span class="line">  <span class="keyword">var</span> nd = utc + <span class="number">3600000</span> * offset;</span><br><span class="line">  <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>(nd);</span><br><span class="line">  exp.setTime(exp.getTime() + Hours * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">document</span>.cookie =</span><br><span class="line">    name +</span><br><span class="line">    <span class="string">"="</span> +</span><br><span class="line">    <span class="built_in">escape</span>(value) +</span><br><span class="line">    <span class="string">";path=/;expires="</span> +</span><br><span class="line">    exp.toGMTString() +</span><br><span class="line">    <span class="string">";domain=360doc.com;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取cookie值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>));</span><br><span class="line">  <span class="keyword">if</span> (arr != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(arr[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="加载样式文件表"><a href="#加载样式文件表" class="headerlink" title="加载样式文件表"></a>加载样式文件表</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LoadStyle</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.createStyleSheet(url);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">var</span> cssLink = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</span><br><span class="line">    cssLink.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">    cssLink.type = <span class="string">"text/css"</span>;</span><br><span class="line">    cssLink.href = url;</span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    head.appendChild(cssLink);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回脚本内容"><a href="#返回脚本内容" class="headerlink" title="返回脚本内容"></a>返回脚本内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evalscript</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (s.indexOf(<span class="string">"&lt;script"</span>) == <span class="number">-1</span>) <span class="keyword">return</span> s;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="regexp">/&lt;script[^\&gt;]*?&gt;([^\x00]*?)&lt;\/script&gt;/gi</span>;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">while</span> ((arr = p.exec(s))) &#123;</span><br><span class="line">    <span class="keyword">var</span> p1 = <span class="regexp">/&lt;script[^\&gt;]*?src=\"([^\&gt;]*?)\"[^\&gt;]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?&gt;&lt;\/script&gt;/i</span>;</span><br><span class="line">    <span class="keyword">var</span> arr1 = [];</span><br><span class="line">    arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">if</span> (arr1) &#123;</span><br><span class="line">      appendscript(arr1[<span class="number">1</span>], <span class="string">""</span>, arr1[<span class="number">2</span>], arr1[<span class="number">3</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      p1 = <span class="regexp">/&lt;script(.*?)&gt;([^\x00]+?)&lt;\/script&gt;/i</span>;</span><br><span class="line">      arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">      appendscript(<span class="string">""</span>, arr1[<span class="number">2</span>], arr1[<span class="number">1</span>].indexOf(<span class="string">"reload="</span>) != <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="清除脚本内容"><a href="#清除脚本内容" class="headerlink" title="清除脚本内容"></a>清除脚本内容</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripscript</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s.replace(<span class="regexp">/&lt;script.*?&gt;.*?&lt;\/script&gt;/gi</span>, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="动态加载脚本文件"><a href="#动态加载脚本文件" class="headerlink" title="动态加载脚本文件"></a>动态加载脚本文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendscript</span>(<span class="params">src, text, reload, charset</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = hash(src + text);</span><br><span class="line">  <span class="keyword">if</span> (!reload &amp;&amp; in_array(id, evalscripts)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (reload &amp;&amp; $(id)) &#123;</span><br><span class="line">    $(id).parentNode.removeChild($(id));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  evalscripts.push(id);</span><br><span class="line">  <span class="keyword">var</span> scriptNode = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  scriptNode.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">  scriptNode.id = id;</span><br><span class="line">  scriptNode.charset = charset</span><br><span class="line">    ? charset</span><br><span class="line">    : BROWSER.firefox</span><br><span class="line">    ? <span class="built_in">document</span>.characterSet</span><br><span class="line">    : <span class="built_in">document</span>.charset;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (src) &#123;</span><br><span class="line">      scriptNode.src = src;</span><br><span class="line">      scriptNode.onloadDone = <span class="literal">false</span>;</span><br><span class="line">      scriptNode.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        scriptNode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">        JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      scriptNode.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          (scriptNode.readyState == <span class="string">"loaded"</span> ||</span><br><span class="line">            scriptNode.readyState == <span class="string">"complete"</span>) &amp;&amp;</span><br><span class="line">          !scriptNode.onloadDone</span><br><span class="line">        ) &#123;</span><br><span class="line">          scriptNode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">          JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text) &#123;</span><br><span class="line">      scriptNode.text = text;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(scriptNode);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="检验-URL-链接是否有效"><a href="#检验-URL-链接是否有效" class="headerlink" title="检验 URL 链接是否有效"></a>检验 URL 链接是否有效</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlState</span>(<span class="params">URL</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"microsoft.xmlhttp"</span>);</span><br><span class="line">  xmlhttp.Open(<span class="string">"GET"</span>, URL, <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    xmlhttp.Send();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = xmlhttp.responseText;</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">      <span class="keyword">if</span> (xmlhttp.Status == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取页面高度"><a href="#获取页面高度" class="headerlink" title="获取页面高度"></a>获取页面高度</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取页面高度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="built_in">document</span>,</span><br><span class="line">    a = g.body,</span><br><span class="line">    f = g.documentElement,</span><br><span class="line">    d = g.compatMode == <span class="string">"BackCompat"</span> ? a : g.documentElement;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollHeight, a.scrollHeight, d.clientHeight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取页面可视宽度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="built_in">document</span>,</span><br><span class="line">    a = d.compatMode == <span class="string">"BackCompat"</span> ? d.body : d.documentElement;</span><br><span class="line">  <span class="keyword">return</span> a.clientWidth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取页面宽度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="built_in">document</span>,</span><br><span class="line">    a = g.body,</span><br><span class="line">    f = g.documentElement,</span><br><span class="line">    d = g.compatMode == <span class="string">"BackCompat"</span> ? a : g.documentElement;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollWidth, a.scrollWidth, d.clientWidth);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回顶部的通用方法"><a href="#返回顶部的通用方法" class="headerlink" title="返回顶部的通用方法"></a>返回顶部的通用方法</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backTop</span>(<span class="params">btnId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(btnId);</span><br><span class="line">  <span class="keyword">var</span> d = <span class="built_in">document</span>.documentElement;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">document</span>.body;</span><br><span class="line">  <span class="built_in">window</span>.onscroll = <span class="keyword">set</span>;</span><br><span class="line">  btn.style.display = "none";</span><br><span class="line">  btn.onclick = function() &#123;</span><br><span class="line">    btn.style.display = <span class="string">"none"</span>;</span><br><span class="line">    <span class="built_in">window</span>.onscroll = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      d.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">      b.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">      <span class="keyword">if</span> (d.scrollTop + b.scrollTop == <span class="number">0</span>)</span><br><span class="line">        clearInterval(btn.timer, (<span class="built_in">window</span>.onscroll = <span class="keyword">set</span>));</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;;</span><br><span class="line">  function <span class="keyword">set</span>() &#123;</span><br><span class="line">    btn.style.display = d.scrollTop + b.scrollTop &gt; <span class="number">100</span> ? <span class="string">"block"</span> : <span class="string">"none"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">backTop(<span class="string">"goTop"</span>);</span><br></pre></td></tr></table></figure>

<h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="keyword">this</span>.split(<span class="regexp">/[\r\n]+/</span>);</span><br><span class="line">  <span class="keyword">var</span> y = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; x.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      !<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^"</span> + x.replace(<span class="regexp">/([^\w])/gi</span>, <span class="string">"\\$1"</span>) + <span class="string">"$"</span>, <span class="string">"igm"</span>).test(y)</span><br><span class="line">    ) &#123;</span><br><span class="line">      y += x + <span class="string">"\r\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="comment">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>

<h2 id="按字典顺序，对每行进行数组排序"><a href="#按字典顺序，对每行进行数组排序" class="headerlink" title="按字典顺序，对每行进行数组排序"></a>按字典顺序，对每行进行数组排序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SetSort</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = K1.value</span><br><span class="line">    .split(<span class="regexp">/[\r\n]/</span>)</span><br><span class="line">    .sort()</span><br><span class="line">    .join(<span class="string">"\r\n"</span>); <span class="comment">//顺序</span></span><br><span class="line">  <span class="keyword">var</span> test = K1.value</span><br><span class="line">    .split(<span class="regexp">/[\r\n]/</span>)</span><br><span class="line">    .sort()</span><br><span class="line">    .reverse()</span><br><span class="line">    .join(<span class="string">"\r\n"</span>); <span class="comment">//反序</span></span><br><span class="line">  K1.value = K1.value != text ? text : test;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="字符串反序输出"><a href="#字符串反序输出" class="headerlink" title="字符串反序输出"></a>字符串反序输出</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsReverse</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> text</span><br><span class="line">    .split(<span class="string">""</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .join(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="金额大写转换函数"><a href="#金额大写转换函数" class="headerlink" title="金额大写转换函数"></a>金额大写转换函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式转换</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">tranvalue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> dw2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">"万"</span>, <span class="string">"亿"</span>); <span class="comment">//大单位</span></span><br><span class="line">    <span class="keyword">var</span> dw1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"拾"</span>, <span class="string">"佰"</span>, <span class="string">"仟"</span>); <span class="comment">//小单位</span></span><br><span class="line">    <span class="keyword">var</span> dw = <span class="keyword">new</span> <span class="built_in">Array</span>(</span><br><span class="line">      <span class="string">"零"</span>,</span><br><span class="line">      <span class="string">"壹"</span>,</span><br><span class="line">      <span class="string">"贰"</span>,</span><br><span class="line">      <span class="string">"叁"</span>,</span><br><span class="line">      <span class="string">"肆"</span>,</span><br><span class="line">      <span class="string">"伍"</span>,</span><br><span class="line">      <span class="string">"陆"</span>,</span><br><span class="line">      <span class="string">"柒"</span>,</span><br><span class="line">      <span class="string">"捌"</span>,</span><br><span class="line">      <span class="string">"玖"</span></span><br><span class="line">    ); <span class="comment">//整数部分用</span></span><br><span class="line">    <span class="comment">//以下是小写转换成大写显示在合计大写的文本框中</span></span><br><span class="line">    <span class="comment">//分离整数与小数</span></span><br><span class="line">    <span class="keyword">var</span> source = splits(tranvalue);</span><br><span class="line">    <span class="keyword">var</span> num = source[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> dig = source[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//转换整数部分</span></span><br><span class="line">    <span class="keyword">var</span> k1 = <span class="number">0</span>; <span class="comment">//计小单位</span></span><br><span class="line">    <span class="keyword">var</span> k2 = <span class="number">0</span>; <span class="comment">//计大单位</span></span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">var</span> len = source[<span class="number">0</span>].length; <span class="comment">//整数的长度</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= len; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> n = source[<span class="number">0</span>].charAt(len - i); <span class="comment">//取得某个位数上的数字</span></span><br><span class="line">      <span class="keyword">var</span> bn = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        bn = source[<span class="number">0</span>].charAt(len - i - <span class="number">1</span>); <span class="comment">//取得某个位数前一位上的数字</span></span><br><span class="line">      &#125;</span><br><span class="line">      sum = sum + <span class="built_in">Number</span>(n);</span><br><span class="line">      <span class="keyword">if</span> (sum != <span class="number">0</span>) &#123;</span><br><span class="line">        str = dw[<span class="built_in">Number</span>(n)].concat(str); <span class="comment">//取得该数字对应的大写数字，并插入到str字符串的前面</span></span><br><span class="line">        <span class="keyword">if</span> (n == <span class="string">"0"</span>) sum = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//在数字范围内</span></span><br><span class="line">        <span class="keyword">if</span> (k1 != <span class="number">3</span>) &#123;</span><br><span class="line">          <span class="comment">//加小单位</span></span><br><span class="line">          <span class="keyword">if</span> (bn != <span class="number">0</span>) &#123;</span><br><span class="line">            str = dw1[k1].concat(str);</span><br><span class="line">          &#125;</span><br><span class="line">          k1++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//不加小单位，加大单位</span></span><br><span class="line">          k1 = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">var</span> temp = str.charAt(<span class="number">0</span>);</span><br><span class="line">          <span class="keyword">if</span> (temp == <span class="string">"万"</span> || temp == <span class="string">"亿"</span>)</span><br><span class="line">            <span class="comment">//若大单位前没有数字则舍去大单位</span></span><br><span class="line">            str = str.substr(<span class="number">1</span>, str.length - <span class="number">1</span>);</span><br><span class="line">          str = dw2[k2].concat(str);</span><br><span class="line">          sum = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (k1 == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="comment">//小单位到千则大单位进一</span></span><br><span class="line">        k2++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//转换小数部分</span></span><br><span class="line">    <span class="keyword">var</span> strdig = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (dig != <span class="string">""</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> n = dig.charAt(<span class="number">0</span>);</span><br><span class="line">      <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">        strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"角"</span>; <span class="comment">//加数字</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> n = dig.charAt(<span class="number">1</span>);</span><br><span class="line">      <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">        strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"分"</span>; <span class="comment">//加数字</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    str += <span class="string">"元"</span> + strdig;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"0元"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//拆分整数与小数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">splits</span>(<span class="params">tranvalue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">""</span>);</span><br><span class="line">  temp = tranvalue.split(<span class="string">"."</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">    value = temp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HTML5-全屏"><a href="#HTML5-全屏" class="headerlink" title="HTML5 全屏"></a>HTML5 全屏</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fullscreen</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (element.requestFullscreen) &#123;</span><br><span class="line">    element.requestFullscreen();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.mozRequestFullScreen) &#123;</span><br><span class="line">    element.mozRequestFullScreen();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.webkitRequestFullscreen) &#123;</span><br><span class="line">    element.webkitRequestFullscreen();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.msRequestFullscreen) &#123;</span><br><span class="line">    element.msRequestFullscreen();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fullscreen(<span class="built_in">document</span>.documentElement);</span><br></pre></td></tr></table></figure>

<h2 id="js-获取验证码倒计时效果"><a href="#js-获取验证码倒计时效果" class="headerlink" title="js 获取验证码倒计时效果"></a>js 获取验证码倒计时效果</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCode</span>(<span class="params">obj, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = obj.value;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      obj.disabled = <span class="literal">true</span>;</span><br><span class="line">      obj.value = <span class="string">"倒计时"</span> + n-- + <span class="string">"秒"</span>;</span><br><span class="line">      setTimeout(<span class="built_in">arguments</span>.callee, <span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      obj.disabled = <span class="literal">false</span>;</span><br><span class="line">      obj.value = t;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="加入收藏夹代码"><a href="#加入收藏夹代码" class="headerlink" title="加入收藏夹代码"></a>加入收藏夹代码</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AddFavorite</span>(<span class="params">sURL,sTitle</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="built_in">window</span>.external.addFavorite(sURL, sTitle);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (e)&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="built_in">window</span>.sidebar.addPanel(sTitle, sURL, <span class="string">""</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (e)&#123;</span><br><span class="line">            alert(<span class="string">"加入收藏失败，请使用Ctrl+D进行添加"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;a href=”javascript:favorite(‘李刚的学习专栏’,’http:/</span><span class="regexp">/blog.csdn.net/</span>ligang2585116’)”&gt;加入收藏&lt;<span class="regexp">/a&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="js-绑定事件-适用于任何浏览器的元素绑定"><a href="#js-绑定事件-适用于任何浏览器的元素绑定" class="headerlink" title="js 绑定事件 适用于任何浏览器的元素绑定"></a>js 绑定事件 适用于任何浏览器的元素绑定</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eventBind</span>(<span class="params">obj, eventType, callBack</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.addEventListener) &#123;</span><br><span class="line">    obj.addEventListener(eventType, callBack, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    obj.attachEvent(<span class="string">"on"</span> + eventType, callBack);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj[<span class="string">"on"</span> + eventType] = callBack;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">eventBind(<span class="built_in">document</span>, <span class="string">"click"</span>, bodyClick);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除事件</span></span><br><span class="line"><span class="keyword">this</span>.moveBind = <span class="function"><span class="keyword">function</span>(<span class="params">objId, eventType, callBack</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> obj = <span class="built_in">document</span>.getElementById(objId);</span><br><span class="line">  <span class="keyword">if</span> (obj.removeEventListener) &#123;</span><br><span class="line">    obj.removeEventListener(eventType, callBack, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.detachEvent) &#123;</span><br><span class="line">    obj.detachEvent(<span class="string">"on"</span> + eventType, callBack);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj[<span class="string">"on"</span> + eventType] = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="获取当前点击事件的-Object-对象"><a href="#获取当前点击事件的-Object-对象" class="headerlink" title="获取当前点击事件的 Object 对象"></a>获取当前点击事件的 Object 对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.event; <span class="comment">//如果是ie</span></span><br><span class="line">  &#125;</span><br><span class="line">  func = getEvent.caller;</span><br><span class="line">  <span class="keyword">while</span> (func != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> arg0 = func.arguments[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (arg0) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        arg0.constructor == Event ||</span><br><span class="line">        arg0.constructor == MouseEvent ||</span><br><span class="line">        (<span class="keyword">typeof</span> arg0 == <span class="string">"object"</span> &amp;&amp; arg0.preventDefault &amp;&amp; arg0.stopPropagation)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">return</span> arg0;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    func = func.caller;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="按-Ctrl-Entert-直接提交表单"><a href="#按-Ctrl-Entert-直接提交表单" class="headerlink" title="按 Ctrl + Entert 直接提交表单"></a>按 Ctrl + Entert 直接提交表单</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">  evt = evt ? evt : <span class="built_in">window</span>.event ? <span class="built_in">window</span>.event : <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="number">13</span> == evt.keyCode &amp;&amp; evt.ctrlKey) &#123;</span><br><span class="line">    evt.returnValue = <span class="literal">false</span>;</span><br><span class="line">    evt.cancel = <span class="literal">true</span>;</span><br><span class="line">    PostData();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="JS-弹出新窗口全屏"><a href="#JS-弹出新窗口全屏" class="headerlink" title="JS 弹出新窗口全屏"></a>JS 弹出新窗口全屏</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tmp = <span class="built_in">window</span>.open(<span class="string">"about:blank"</span>, <span class="string">""</span>, <span class="string">"fullscreen=1"</span>);</span><br><span class="line">tmp.moveTo(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">tmp.resizeTo(screen.width + <span class="number">20</span>, screen.height);</span><br><span class="line">tmp.focus();</span><br><span class="line">tmp.location.href =</span><br><span class="line">  <span class="string">"http://www.che168.com/pinggu/eva_"</span> + msgResult.message[<span class="number">0</span>] + <span class="string">".html"</span>;</span><br><span class="line"><span class="keyword">var</span> config_ =</span><br><span class="line">  <span class="string">"left=0,top=0,width="</span> +</span><br><span class="line">  <span class="built_in">window</span>.screen.Width +</span><br><span class="line">  <span class="string">",height="</span> +</span><br><span class="line">  <span class="built_in">window</span>.screen.Height;</span><br><span class="line"><span class="built_in">window</span>.open(</span><br><span class="line">  <span class="string">"http://www.che168.com/pinggu/eva_"</span> + msgResult.message[<span class="number">0</span>] + <span class="string">".html"</span>,</span><br><span class="line">  <span class="string">"winHanle"</span>,</span><br><span class="line">  config_</span><br><span class="line">);</span><br><span class="line"><span class="comment">//模拟form提交打开新页面</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="built_in">document</span>.createElement(<span class="string">"form"</span>);</span><br><span class="line">f.setAttribute(</span><br><span class="line">  <span class="string">"action"</span>,</span><br><span class="line">  <span class="string">"http://www.che168.com/pinggu/eva_"</span> + msgResult.message[<span class="number">0</span>] + <span class="string">".html"</span></span><br><span class="line">);</span><br><span class="line">f.target = <span class="string">"_blank"</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(f);</span><br><span class="line">f.submit();</span><br></pre></td></tr></table></figure>

<h2 id="JS-继承的实现方式-参考"><a href="#JS-继承的实现方式-参考" class="headerlink" title="JS 继承的实现方式 参考"></a>JS 继承的实现方式 <a href="http://www.cnblogs.com/humin/p/4556820.html" target="_blank" rel="noopener">参考</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个动物类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 属性</span></span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">"Animal"</span>;</span><br><span class="line">  <span class="comment">// 实例方法</span></span><br><span class="line">  <span class="keyword">this</span>.sleep = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">"正在睡觉！"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 原型方法</span></span><br><span class="line">Animal.prototype.eat = <span class="function"><span class="keyword">function</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">"正在吃："</span> + food);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 原型链继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">Cat.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line">Cat.prototype.name = <span class="string">"cat"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//　Test Code</span></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);</span><br><span class="line"><span class="built_in">console</span>.log(cat.eat(<span class="string">"fish"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep());</span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.构造继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">"Tom"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test Code</span></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);</span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep());</span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.寄生组合继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  Animal.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.name = name || <span class="string">"Tom"</span>;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 创建一个没有实例方法的类</span></span><br><span class="line">  <span class="keyword">var</span> Super = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  Super.prototype = Animal.prototype;</span><br><span class="line">  <span class="comment">//将实例作为子类的原型</span></span><br><span class="line">  Cat.prototype = <span class="keyword">new</span> Super();</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test Code</span></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Cat();</span><br><span class="line"><span class="built_in">console</span>.log(cat.name);</span><br><span class="line"><span class="built_in">console</span>.log(cat.sleep());</span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Animal); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(cat <span class="keyword">instanceof</span> Cat); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h2 id="H5-页检测手机是否安装-app-相关流程-参考"><a href="#H5-页检测手机是否安装-app-相关流程-参考" class="headerlink" title="H5 页检测手机是否安装 app 相关流程 参考"></a>H5 页检测手机是否安装 app 相关流程 <a href="https://segmentfault.com/a/1190000009123583" target="_blank" rel="noopener">参考</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> openApp = <span class="function"><span class="keyword">function</span>(<span class="params">openUrl, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//检查app是否打开</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">checkOpen</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _clickTime = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">elsTime</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (elsTime &gt; <span class="number">3000</span> || <span class="built_in">document</span>.hidden || <span class="built_in">document</span>.webkitHidden) &#123;</span><br><span class="line">        cb(<span class="number">1</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        cb(<span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//启动间隔20ms运行的定时器，并检测累计消耗时间是否超过3000ms，超过则结束</span></span><br><span class="line">    <span class="keyword">var</span> _count = <span class="number">0</span>,</span><br><span class="line">      intHandle;</span><br><span class="line">    intHandle = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      _count++;</span><br><span class="line">      <span class="keyword">var</span> elsTime = +<span class="keyword">new</span> <span class="built_in">Date</span>() - _clickTime;</span><br><span class="line">      <span class="keyword">if</span> (_count &gt;= <span class="number">100</span> || elsTime &gt; <span class="number">3000</span>) &#123;</span><br><span class="line">        clearInterval(intHandle);</span><br><span class="line">        check(elsTime);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//在iframe 中打开APP</span></span><br><span class="line">  <span class="keyword">var</span> ifr = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">  ifr.src = openUrl;</span><br><span class="line">  ifr.style.display = <span class="string">"none"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">    <span class="comment">//客户端检测微信直接跳应用宝链接</span></span><br><span class="line">    <span class="keyword">var</span> browser = BrowserInfo();</span><br><span class="line">    <span class="comment">//使用微链接</span></span><br><span class="line">    <span class="keyword">var</span> encodeUri = <span class="built_in">encodeURIComponent</span>(openUrl);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (browser.isWeixin) &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.href = <span class="string">"你的微链url&amp;android_schema="</span> + encodeUri;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      checkOpen(<span class="function"><span class="keyword">function</span>(<span class="params">opened</span>) </span>&#123;</span><br><span class="line">        callback &amp;&amp; callback(opened);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(ifr);</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(ifr);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="获取滚动位置"><a href="#获取滚动位置" class="headerlink" title="获取滚动位置"></a>获取滚动位置</h2><p>如果已定义，请使用 pageXOffset 和 pageYOffset，否则使用 scrollLeft 和 scrollTop，可以省略 el 来使用 window 的默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPos = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123;</span><br><span class="line">  x: el.pageXOffset !== <span class="literal">undefined</span> ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">  y: el.pageYOffset !== <span class="literal">undefined</span> ? el.pageYOffset : el.scrollTop</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// getScrollPos() -&gt; &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="滚动到顶部"><a href="#滚动到顶部" class="headerlink" title="滚动到顶部"></a>滚动到顶部</h2><p>使用 document.documentElement.scrollTop 或 document.body.scrollTop 获取到顶部的距离。<br>从顶部滚动一小部分距离。<br>使用 window.requestAnimationFrame（）来滚动。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// scrollToTop()</span></span><br></pre></td></tr></table></figure>

<h2 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a><a href="https://segmentfault.com/a/1190000008263193" target="_blank" rel="noopener">柯里化函数</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> curring = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _args = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">cb</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, _args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.push.apply(_args, [].slice.call(<span class="built_in">arguments</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cb;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> multi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> argsArray = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  argsArray.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">    total += item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> calc = curring(multi);</span><br><span class="line"></span><br><span class="line">calc(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"><span class="built_in">console</span>.log(calc()); <span class="comment">//空白调用时才真正计算</span></span><br></pre></td></tr></table></figure>

<h2 id="js-判断是否含有-emoij"><a href="#js-判断是否含有-emoij" class="headerlink" title="js 判断是否含有 emoij"></a>js 判断是否含有 emoij</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmojiCharacter</span>(<span class="params">substring</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; substring.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> hs = substring.charCodeAt(i);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0xd800</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0xdbff</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (substring.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> ls = substring.charCodeAt(i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">var</span> uc = ((hs - <span class="number">0xd800</span>) * <span class="number">0x400</span>) + (ls - <span class="number">0xdc00</span>) + <span class="number">0x10000</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0x1d000</span> &lt;= uc &amp;&amp; uc &lt;= <span class="number">0x1f77f</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (substring.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> ls = substring.charCodeAt(i + <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">if</span> (ls == <span class="number">0x20e3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="number">0x2100</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x27ff</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x2B05</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x2b07</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x2934</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x2935</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">0x3297</span> &lt;= hs &amp;&amp; hs &lt;= <span class="number">0x3299</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hs == <span class="number">0xa9</span> || hs == <span class="number">0xae</span> || hs == <span class="number">0x303d</span> || hs == <span class="number">0x3030</span> || hs == <span class="number">0x2b55</span> || hs == <span class="number">0x2b1c</span> || hs == <span class="number">0x2b1b</span> || hs == <span class="number">0x2b50</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤掉表情：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filteremoji</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ranges = [<span class="string">'\ud83c[\udf00-\udfff]'</span>, <span class="string">'\ud83d[\udc00-\ude4f]'</span>, <span class="string">'\ud83d[\ude80-\udeff]'</span>];</span><br><span class="line">  <span class="keyword">var</span> emojireg = $(<span class="string">"#emoji_input"</span>).val();</span><br><span class="line">  emojireg = emojireg.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(ranges.join(<span class="string">'|'</span>), <span class="string">'g'</span>), <span class="string">''</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="树状结构转-list"><a href="#树状结构转-list" class="headerlink" title="树状结构转 list"></a>树状结构转 list</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把树状结构转list， value =&gt; key</span></span><br><span class="line">Utils.option2remap = <span class="function">(<span class="params">options, prefix</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> _map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; options.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> options[i] == <span class="string">"object"</span>) &#123;</span><br><span class="line">      _map[(prefix || <span class="string">""</span>) + options[i].label] = options[i].value;</span><br><span class="line">      <span class="keyword">if</span> (options[i].children) &#123;</span><br><span class="line">        <span class="keyword">let</span> _prefix = prefix || <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">if</span> (options[i].label.indexOf(<span class="string">"省"</span>) === <span class="number">-1</span>)</span><br><span class="line">          _prefix += <span class="string">`<span class="subst">$&#123;options[i].label&#125;</span>$`</span>;</span><br><span class="line">        <span class="keyword">const</span> _childMap = Utils.option2remap(options[i].children, _prefix);</span><br><span class="line">        <span class="built_in">Object</span>.assign(_map, _childMap);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _map;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把树状结构转list</span></span><br><span class="line">Utils.option2map = <span class="function">(<span class="params">options, prefix</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> _map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; options.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> options[i] == <span class="string">"object"</span>) &#123;</span><br><span class="line">      _map[(prefix || <span class="string">""</span>) + options[i].label] = options[i].value;</span><br><span class="line">      <span class="keyword">if</span> (options[i].children) &#123;</span><br><span class="line">        <span class="keyword">const</span> _childMap = Utils.option2map(</span><br><span class="line">          options[i].children,</span><br><span class="line">          <span class="string">`<span class="subst">$&#123;(prefix || <span class="string">""</span>) + options[i].value&#125;</span>$`</span></span><br><span class="line">        );</span><br><span class="line">        <span class="built_in">Object</span>.assign(_map, _childMap);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _map;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="解决事件快速点击"><a href="#解决事件快速点击" class="headerlink" title="解决事件快速点击"></a>解决事件快速点击</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 指定时间内只能调用一次</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>functionTobeCalled 被包装的方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>interval 时间间隔，可省略，默认600毫秒</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@example </span>onClick=&#123;(params: any) =&gt; callOnceInInterval(() =&gt; click(params))&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> isCalled = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> timer: any;</span><br><span class="line"><span class="keyword">const</span> callOnceInInterval = <span class="function">(<span class="params">functionTobeCalled: (</span>) =&gt;</span> <span class="keyword">void</span>, interval = <span class="number">600</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!isCalled) &#123;</span><br><span class="line">    isCalled = <span class="literal">true</span>;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      isCalled = <span class="literal">false</span>;</span><br><span class="line">    &#125;, interval);</span><br><span class="line">    <span class="keyword">return</span> functionTobeCalled();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="canvas-动态获取字体大小"><a href="#canvas-动态获取字体大小" class="headerlink" title="canvas 动态获取字体大小"></a>canvas 动态获取字体大小</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1920/19.2/100*16 = 16   随视图缩小而缩小</span></span><br><span class="line"><span class="comment">// 16/1920*100*19.2 = 16   相反</span></span><br><span class="line"><span class="keyword">const</span> base = <span class="number">1920</span> / <span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> w = <span class="built_in">document</span>.documentElement.clientWidth || <span class="number">1920</span>;</span><br><span class="line"><span class="keyword">const</span> dpr = <span class="built_in">window</span>.devicePixelRatio || <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> getFontSize = <span class="function"><span class="params">size</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round((w / base / <span class="number">100</span>) * size * dpr);</span><br><span class="line">  <span class="comment">// xxx.toFixed(fixedDigits);</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="px-pt互转"><a href="#px-pt互转" class="headerlink" title="px pt互转"></a><code>px</code> <code>pt</code>互转</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">96</span>dpi   <span class="number">1</span>px = <span class="number">1</span>/<span class="number">96</span><span class="keyword">in</span></span><br><span class="line">		<span class="number">1</span>pt = <span class="number">1</span>/<span class="number">72</span><span class="keyword">in</span>                 <span class="number">1</span><span class="keyword">in</span> = <span class="number">72</span>pt</span><br><span class="line"></span><br><span class="line">		<span class="number">1</span>px = <span class="number">0.75</span>pt = <span class="number">1</span>/<span class="number">96</span>*<span class="number">72</span><span class="keyword">in</span>     <span class="number">72</span>/<span class="number">96</span> = <span class="number">0.75</span>pt</span><br><span class="line">		<span class="number">1</span>pt = <span class="number">1.33</span>px = <span class="number">1</span>*<span class="number">96</span>/<span class="number">72</span>       <span class="number">96</span>/<span class="number">72</span> = <span class="number">1.33</span>px</span><br><span class="line"></span><br><span class="line">all     px = pt * DPI / <span class="number">72</span></span><br><span class="line">        pt = px / DPI * <span class="number">72</span></span><br><span class="line"></span><br><span class="line">px to pd</span><br><span class="line"><span class="number">160</span>ppi 是标准</span><br><span class="line"></span><br><span class="line">公式：pd to px</span><br><span class="line">     pd * (ppi / <span class="number">160</span>) = px</span><br><span class="line"></span><br><span class="line">     px to pd</span><br><span class="line">     px / (ppi / <span class="number">160</span>) = pd</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>pd * (<span class="number">320</span>ppi / <span class="number">160</span>ppi) = <span class="number">2</span>px</span><br><span class="line"><span class="number">2</span>px / (<span class="number">320</span>ppi / <span class="number">16</span>oppi) = <span class="number">1</span>pd</span><br></pre></td></tr></table></figure>

<h2 id="px-vw-互转"><a href="#px-vw-互转" class="headerlink" title="px vw 互转"></a>px vw 互转</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// px to vw</span></span><br><span class="line">宽度(vw) =  <span class="number">100</span> / <span class="number">1920</span>px * <span class="number">60</span>px;</span><br><span class="line">宽度(vw) =  <span class="number">1</span> / <span class="number">1920</span>px * <span class="number">100</span> * <span class="number">60</span>px;</span><br><span class="line">高度(vh) = <span class="number">100</span> / <span class="number">1080</span>px * <span class="number">40</span>px;</span><br><span class="line"></span><br><span class="line"><span class="comment">// vw to px</span></span><br><span class="line">宽度(px) =  <span class="number">1920</span>px / <span class="number">100</span> * <span class="number">3.125</span>vw;</span><br><span class="line">高度(px) = <span class="number">1080</span>px / <span class="number">100</span> * <span class="number">3.703</span>vh;</span><br></pre></td></tr></table></figure>

<h2 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//十进制转其他</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">110</span>;</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line"><span class="built_in">console</span>.log(x.toString(<span class="number">8</span>));</span><br><span class="line"><span class="built_in">console</span>.log(x.toString(<span class="number">32</span>));</span><br><span class="line"><span class="built_in">console</span>.log(x.toString(<span class="number">16</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//其他转十进制</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="string">"110"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(x, <span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(x, <span class="number">8</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(x, <span class="number">16</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//其他转其他</span></span><br><span class="line"><span class="comment">//先用parseInt转成十进制再用toString转到目标进制</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="built_in">parseInt</span>(<span class="number">141</span>, <span class="number">8</span>)));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">"ff"</span>, <span class="number">16</span>).toString(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h2 id="unicode-转换"><a href="#unicode-转换" class="headerlink" title="unicode 转换"></a>unicode 转换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toUnicode</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> str =<span class="string">''</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++)&#123;</span><br><span class="line">		str += <span class="string">"\\u"</span> + <span class="built_in">parseInt</span>(data[i].charCodeAt(<span class="number">0</span>), <span class="number">10</span>).toString(<span class="number">16</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toHanzi</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">	data = data.split(<span class="string">"\u"</span>);</span><br><span class="line">	<span class="keyword">var</span> str =<span class="string">''</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">		str += <span class="built_in">String</span>.fromCharCode(<span class="built_in">parseInt</span>(data[i], <span class="number">16</span>).toString(<span class="number">10</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// escape unescape 版</span></span><br><span class="line"><span class="keyword">var</span> UnicodeConverter = &#123;</span><br><span class="line">	encodeUnicode:<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">escape</span>(str).toLocaleLowerCase().replace(<span class="regexp">/%u/gi</span>,<span class="string">'\\u'</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	decodeUnicode:<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">unescape</span>(str.replace(<span class="regexp">/\\u/gi</span>,<span class="string">'%u'</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 只转换汉字，避免转换回车，空格，换行，tab</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toUnicode</span>(<span class="params">s</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> s.replace(<span class="regexp">/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">newStr</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"\\u"</span> + newStr.charCodeAt(<span class="number">0</span>).toString(<span class="number">16</span>);</span><br><span class="line">　&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 eval 解码</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"\\u6211\\u662Funicode\\u7F16\\u7801"</span>;</span><br><span class="line">str = <span class="built_in">eval</span>(<span class="string">"'"</span> + str + <span class="string">"'"</span>); <span class="comment">// "我是unicode编码"</span></span><br></pre></td></tr></table></figure>

<h2 id="节流-去抖-（建议使用-Lodash-js-或-Underscore-js）"><a href="#节流-去抖-（建议使用-Lodash-js-或-Underscore-js）" class="headerlink" title="节流/去抖 （建议使用 Lodash.js 或 Underscore.js）"></a>节流/去抖 （建议使用 Lodash.js 或 Underscore.js）</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 频率控制 返回函数连续调用时，fn 执行频率限定为每多少时间执行一次</span></span><br><span class="line"><span class="comment"> * @param fn &#123;function&#125;  需要调用的函数</span></span><br><span class="line"><span class="comment"> * @param delay  &#123;number&#125;    延迟时间，单位毫秒</span></span><br><span class="line"><span class="comment"> * @param immediate  &#123;bool&#125; 给 immediate参数传递false 绑定的函数先执行，而不是delay后后执行。</span></span><br><span class="line"><span class="comment"> * @return &#123;function&#125;实际调用函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> throttle = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay, immediate, debounce</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> curr = +<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="comment">//当前事件</span></span><br><span class="line">    last_call = <span class="number">0</span>,</span><br><span class="line">    last_exec = <span class="number">0</span>,</span><br><span class="line">    timer = <span class="literal">null</span>,</span><br><span class="line">    diff, <span class="comment">//时间差</span></span><br><span class="line">    context, <span class="comment">//上下文</span></span><br><span class="line">    args,</span><br><span class="line">    exec = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      last_exec = curr;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    curr = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    (context = <span class="keyword">this</span>),</span><br><span class="line">      (args = <span class="built_in">arguments</span>),</span><br><span class="line">      (diff = curr - (debounce ? last_call : last_exec) - delay);</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    <span class="keyword">if</span> (debounce) &#123;</span><br><span class="line">      <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">        timer = setTimeout(exec, delay);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        exec();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (diff &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        exec();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">        timer = setTimeout(exec, -diff);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    last_call = curr;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 空闲控制 返回函数连续调用时，空闲时间必须大于或等于 delay，fn 才会执行</span></span><br><span class="line"><span class="comment"> * @param fn &#123;function&#125;  要调用的函数</span></span><br><span class="line"><span class="comment"> * @param delay   &#123;number&#125;    空闲时间</span></span><br><span class="line"><span class="comment"> * @param immediate  &#123;bool&#125; 给 immediate参数传递false 绑定的函数先执行，而不是delay后后执行。</span></span><br><span class="line"><span class="comment"> * @return &#123;function&#125;实际调用函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> debounce = <span class="function"><span class="keyword">function</span>(<span class="params">fn, delay, immediate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> throttle(fn, delay, immediate, <span class="literal">true</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="数组平均数"><a href="#数组平均数" class="headerlink" title="数组平均数"></a>数组平均数</h2><p>使用 reduce（）将每个值添加到累加器，初始值为 0，总和除以数组长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / arr.length;</span><br><span class="line"><span class="comment">// average([1,2,3]) -&gt; 2</span></span><br></pre></td></tr></table></figure>

<h2 id="大写每个单词的首字母"><a href="#大写每个单词的首字母" class="headerlink" title="大写每个单词的首字母"></a>大写每个单词的首字母</h2><p>使用 replace（）匹配每个单词的第一个字符，并使用 toUpperCase（）来将其大写。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalizeEveryWord = <span class="function"><span class="params">str</span> =&gt;</span></span><br><span class="line">  str.replace(<span class="regexp">/\b[a-z]/g</span>, char =&gt; char.toUpperCase());</span><br><span class="line"><span class="comment">// capitalizeEveryWord('hello world!') -&gt; 'Hello World!'</span></span><br></pre></td></tr></table></figure>

<h2 id="首字母大写"><a href="#首字母大写" class="headerlink" title="首字母大写"></a>首字母大写</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = <span class="function">(<span class="params">str, lowerRest = <span class="literal">false</span></span>) =&gt;</span></span><br><span class="line">  str.slice(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() +</span><br><span class="line">  (lowerRest ? str.slice(<span class="number">1</span>).toLowerCase() : str.slice(<span class="number">1</span>));</span><br><span class="line"><span class="comment">// capitalize('myName', true) -&gt; 'Myname'</span></span><br></pre></td></tr></table></figure>

<h2 id="计数数组中值的出现次数"><a href="#计数数组中值的出现次数" class="headerlink" title="计数数组中值的出现次数"></a>计数数组中值的出现次数</h2><p>每次遇到数组中的特定值时，使用 reduce（）来递增计数器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, value</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === value ? a + <span class="number">1</span> : a + <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span></span><br></pre></td></tr></table></figure>

<h2 id="数组之间的区别"><a href="#数组之间的区别" class="headerlink" title="数组之间的区别"></a>数组之间的区别</h2><p>从 b 创建一个 Set，然后在 a 上使用 Array.filter（），只保留 b 中不包含的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// difference([1,2,3], [1,2]) -&gt; [3]</span></span><br></pre></td></tr></table></figure>

<h2 id="数组之间的相似性"><a href="#数组之间的相似性" class="headerlink" title="数组之间的相似性"></a>数组之间的相似性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> similarity = <span class="function">(<span class="params">arr, values</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> values.includes(v));</span><br><span class="line"><span class="comment">// similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure>

<h2 id="转义正则表达式"><a href="#转义正则表达式" class="headerlink" title="转义正则表达式"></a>转义正则表达式</h2><p>使用 replace（）来转义特殊字符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> escapeRegExp = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/[.*+?^$&#123;&#125;()|[\]\\]/g</span>, <span class="string">"\\$&amp;"</span>);</span><br><span class="line"><span class="comment">// escapeRegExp('(test)') -&gt; \\(test\\)</span></span><br></pre></td></tr></table></figure>

<h2 id="阶乘"><a href="#阶乘" class="headerlink" title="阶乘"></a>阶乘</h2><p>使用递归。如果 n 小于或等于 1，则返回 1。否则返回 n 和 n - 1 的阶乘的乘积。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="params">n</span> =&gt;</span> (n &lt;= <span class="number">1</span> ? <span class="number">1</span> : n * factorial(n - <span class="number">1</span>));</span><br><span class="line"><span class="comment">// factorial(6) -&gt; 720</span></span><br></pre></td></tr></table></figure>

<h2 id="斐波那契数组生成器"><a href="#斐波那契数组生成器" class="headerlink" title="斐波那契数组生成器"></a>斐波那契数组生成器</h2><p>创建一个特定长度的空数组，初始化前两个值（0 和 1）。使用 Array.reduce（）向数组中添加值，后面的一个数等于前面两个数相加之和（前两个除外）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fibonacci = <span class="function"><span class="params">n</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>(n)</span><br><span class="line">    .fill(<span class="number">0</span>)</span><br><span class="line">    .reduce(</span><br><span class="line">      (acc, val, i) =&gt; acc.concat(i &gt; <span class="number">1</span> ? acc[i - <span class="number">1</span>] + acc[i - <span class="number">2</span>] : i),</span><br><span class="line">      []</span><br><span class="line">    );</span><br><span class="line"><span class="comment">// fibonacci(5) -&gt; [0,1,1,2,3]</span></span><br></pre></td></tr></table></figure>

<h2 id="过滤数组中的非唯一值"><a href="#过滤数组中的非唯一值" class="headerlink" title="过滤数组中的非唯一值"></a>过滤数组中的非唯一值</h2><p>将 Array.filter（）用于仅包含唯一值的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUnique = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.filter(<span class="function"><span class="params">i</span> =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"><span class="comment">// filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span></span><br></pre></td></tr></table></figure>

<h2 id="Flatten-数组"><a href="#Flatten-数组" class="headerlink" title="Flatten 数组"></a>Flatten 数组</h2><p>使用 reduce（）来获取数组中的所有元素，并使用 concat（）来使它们 flatten。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(v), []);</span><br><span class="line"><span class="comment">// flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h2 id="从数组中获取最大值和最小值"><a href="#从数组中获取最大值和最小值" class="headerlink" title="从数组中获取最大值和最小值"></a>从数组中获取最大值和最小值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayMax = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.max(...arr);</span><br><span class="line"><span class="comment">// arrayMax([10, 1, 5]) -&gt; 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrayMin = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.min(...arr);</span><br><span class="line"><span class="comment">// arrayMin([10, 1, 5]) -&gt; 1</span></span><br></pre></td></tr></table></figure>

<h2 id="最大公约数（GCD）"><a href="#最大公约数（GCD）" class="headerlink" title="最大公约数（GCD）"></a>最大公约数（GCD）</h2><p>使用递归。基本情况是当 y 等于 0 时。在这种情况下，返回 x。否则，返回 y 的 GCD 和 x / y 的其余部分。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> (!y ? x : gcd(y, x % y));</span><br><span class="line"><span class="comment">// gcd (8, 36) -&gt; 4</span></span><br></pre></td></tr></table></figure>

<h2 id="用-range-初始化数组"><a href="#用-range-初始化数组" class="headerlink" title="用 range 初始化数组"></a>用 range 初始化数组</h2><p>使用 Array（end-start）创建所需长度的数组，使用 map（）来填充范围中的所需值，可以省略 start 使用默认值 0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayRange = <span class="function">(<span class="params">end, start = <span class="number">0</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.apply(<span class="literal">null</span>, <span class="built_in">Array</span>(end - start)).map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i + start);</span><br><span class="line"><span class="comment">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span></span><br></pre></td></tr></table></figure>

<h2 id="用值初始化数组"><a href="#用值初始化数组" class="headerlink" title="用值初始化数组"></a>用值初始化数组</h2><p>使用 Array（n）创建所需长度的数组，fill(v)以填充所需的值，可以忽略 value 使用默认值 0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArray = <span class="function">(<span class="params">n, value = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(value);</span><br><span class="line"><span class="comment">// initializeArray(5, 2) -&gt; [2,2,2,2,2]</span></span><br></pre></td></tr></table></figure>

<h2 id="测试功能所花费的时间"><a href="#测试功能所花费的时间" class="headerlink" title="测试功能所花费的时间"></a>测试功能所花费的时间</h2><p>使用 performance.now（）获取函数的开始和结束时间，console.log（）所花费的时间。第一个参数是函数名，随后的参数传递给函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeTaken = <span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.time(<span class="string">"timeTaken"</span>);</span><br><span class="line">  <span class="keyword">const</span> r = callback();</span><br><span class="line">  <span class="built_in">console</span>.timeEnd(<span class="string">"timeTaken"</span>);</span><br><span class="line">  <span class="keyword">return</span> r;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span></span><br><span class="line"><span class="comment">// (logged): timeTaken: 0.02099609375ms</span></span><br></pre></td></tr></table></figure>

<h2 id="按字符串排序（按字母顺序排列）"><a href="#按字符串排序（按字母顺序排列）" class="headerlink" title="按字符串排序（按字母顺序排列）"></a>按字符串排序（按字母顺序排列）</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortCharactersInString = <span class="function"><span class="params">str</span> =&gt;</span></span><br><span class="line">  str</span><br><span class="line">    .split(<span class="string">""</span>)</span><br><span class="line">    .sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.localeCompare(b))</span><br><span class="line">    .join(<span class="string">""</span>);</span><br><span class="line"><span class="comment">// sortCharactersInString('cabbage') -&gt; 'aabbceg'</span></span><br></pre></td></tr></table></figure>

<h2 id="来自键值对的对象"><a href="#来自键值对的对象" class="headerlink" title="来自键值对的对象"></a>来自键值对的对象</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objectFromPairs = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> ((a[v[<span class="number">0</span>]] = v[<span class="number">1</span>]), a), &#123;&#125;);</span><br><span class="line"><span class="comment">// objectFromPairs([['a',1],['b',2]]) -&gt; &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>使用 Array.reduce（）通过函数传递值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipe = <span class="function">(<span class="params">...funcs</span>) =&gt;</span> <span class="function"><span class="params">arg</span> =&gt;</span> funcs.reduce(<span class="function">(<span class="params">acc, func</span>) =&gt;</span> func(acc), arg);</span><br><span class="line"><span class="comment">// pipe(btoa, x =&gt; x.toUpperCase())("Test") -&gt; "VGVZDA=="</span></span><br></pre></td></tr></table></figure>

<h2 id="Powerset"><a href="#Powerset" class="headerlink" title="Powerset"></a>Powerset</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> powerset = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(a.map(<span class="function"><span class="params">r</span> =&gt;</span> [v].concat(r))), [[]]);</span><br><span class="line"><span class="comment">// powerset([1,2]) -&gt; [[], [1], [2], [2,1]]</span></span><br></pre></td></tr></table></figure>

<h2 id="随机化数组的顺序"><a href="#随机化数组的顺序" class="headerlink" title="随机化数组的顺序"></a>随机化数组的顺序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shuffle = <span class="function"><span class="params">arr</span> =&gt;</span> arr.sort(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>);</span><br><span class="line"><span class="comment">// shuffle([1,2,3]) -&gt; [2,3,1]</span></span><br></pre></td></tr></table></figure>

<h2 id="RGB-到十六进制"><a href="#RGB-到十六进制" class="headerlink" title="RGB 到十六进制"></a>RGB 到十六进制</h2><p>使用按位左移运算符（&lt;&lt;）和 toString（16），然后 padStart（6，“0”）将给定的 RGB 参数转换为十六进制字符串以获得 6 位十六进制值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rgbToHex = <span class="function">(<span class="params">r, g, b</span>) =&gt;</span></span><br><span class="line">  ((r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b).toString(<span class="number">16</span>).padStart(<span class="number">6</span>, <span class="string">"0"</span>);</span><br><span class="line"><span class="comment">// rgbToHex(255, 165, 1) -&gt; 'ffa501'</span></span><br></pre></td></tr></table></figure>

<h2 id="打开新窗口"><a href="#打开新窗口" class="headerlink" title="打开新窗口"></a>打开新窗口</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Sting&#125;</span> <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Sting&#125;</span> <span class="variable">title</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> <span class="variable">w</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Number&#125;</span> <span class="variable">h</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">openWindow</span>(<span class="params">url, title, w, h</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Fixes dual-screen position                            Most browsers       Firefox</span></span><br><span class="line">  <span class="keyword">const</span> dualScreenLeft =</span><br><span class="line">    <span class="built_in">window</span>.screenLeft !== <span class="literal">undefined</span> ? <span class="built_in">window</span>.screenLeft : screen.left;</span><br><span class="line">  <span class="keyword">const</span> dualScreenTop =</span><br><span class="line">    <span class="built_in">window</span>.screenTop !== <span class="literal">undefined</span> ? <span class="built_in">window</span>.screenTop : screen.top;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> width = <span class="built_in">window</span>.innerWidth</span><br><span class="line">    ? <span class="built_in">window</span>.innerWidth</span><br><span class="line">    : <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">    ? <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">    : screen.width;</span><br><span class="line">  <span class="keyword">const</span> height = <span class="built_in">window</span>.innerHeight</span><br><span class="line">    ? <span class="built_in">window</span>.innerHeight</span><br><span class="line">    : <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">    ? <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">    : screen.height;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> left = width / <span class="number">2</span> - w / <span class="number">2</span> + dualScreenLeft;</span><br><span class="line">  <span class="keyword">const</span> top = height / <span class="number">2</span> - h / <span class="number">2</span> + dualScreenTop;</span><br><span class="line">  <span class="keyword">const</span> newWindow = <span class="built_in">window</span>.open(</span><br><span class="line">    url,</span><br><span class="line">    title,</span><br><span class="line">    <span class="string">"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width="</span> +</span><br><span class="line">      w +</span><br><span class="line">      <span class="string">", height="</span> +</span><br><span class="line">      h +</span><br><span class="line">      <span class="string">", top="</span> +</span><br><span class="line">      top +</span><br><span class="line">      <span class="string">", left="</span> +</span><br><span class="line">      left</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Puts focus on the newWindow</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.focus) &#123;</span><br><span class="line">    newWindow.focus();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="scroll-to"><a href="#scroll-to" class="headerlink" title="scroll to"></a>scroll to</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.easeInOutQuad = <span class="function"><span class="keyword">function</span>(<span class="params">t, b, c, d</span>) </span>&#123;</span><br><span class="line">  t /= d / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span> (t &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (c / <span class="number">2</span>) * t * t + b;</span><br><span class="line">  &#125;</span><br><span class="line">  t--;</span><br><span class="line">  <span class="keyword">return</span> (-c / <span class="number">2</span>) * (t * (t - <span class="number">2</span>) - <span class="number">1</span>) + b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// requestAnimationFrame for Smart Animating http://goo.gl/sx5sts</span></span><br><span class="line"><span class="keyword">var</span> requestAnimFrame = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.mozRequestAnimationFrame ||</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.setTimeout(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Because it's so fucking difficult to detect the scrolling element, just move them all</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">amount</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">amount</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.documentElement.scrollTop = amount;</span><br><span class="line">  <span class="built_in">document</span>.body.parentNode.scrollTop = amount;</span><br><span class="line">  <span class="built_in">document</span>.body.scrollTop = amount;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">position</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="built_in">document</span>.documentElement.scrollTop ||</span><br><span class="line">    <span class="built_in">document</span>.body.parentNode.scrollTop ||</span><br><span class="line">    <span class="built_in">document</span>.body.scrollTop</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">to</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number&#125;</span> <span class="variable">duration</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">callback</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">scrollTo</span>(<span class="params">to, duration, callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> start = position();</span><br><span class="line">  <span class="keyword">const</span> change = to - start;</span><br><span class="line">  <span class="keyword">const</span> increment = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">let</span> currentTime = <span class="number">0</span>;</span><br><span class="line">  duration = <span class="keyword">typeof</span> duration === <span class="string">"undefined"</span> ? <span class="number">500</span> : duration;</span><br><span class="line">  <span class="keyword">var</span> animateScroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// increment the time</span></span><br><span class="line">    currentTime += increment;</span><br><span class="line">    <span class="comment">// find the value with the quadratic in-out easing function</span></span><br><span class="line">    <span class="keyword">var</span> val = <span class="built_in">Math</span>.easeInOutQuad(currentTime, start, change, duration);</span><br><span class="line">    <span class="comment">// move the document.body</span></span><br><span class="line">    move(val);</span><br><span class="line">    <span class="comment">// do the animation unless its over</span></span><br><span class="line">    <span class="keyword">if</span> (currentTime &lt; duration) &#123;</span><br><span class="line">      requestAnimFrame(animateScroll);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (callback &amp;&amp; <span class="keyword">typeof</span> callback === <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="comment">// the animation is done so lets callback</span></span><br><span class="line">        callback();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  animateScroll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="下载图片的几种方式"><a href="#下载图片的几种方式" class="headerlink" title="下载图片的几种方式"></a>下载图片的几种方式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exportImageAct</span>(<span class="params">imgUrl, imgName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">    aLinkDownload(imgUrl, imgName); <span class="comment">// IE浏览器</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (navigator.userAgent.indexOf(<span class="string">"Firefox"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">    imageCanvasAlink(imgUrl, imgName); <span class="comment">// 火狐浏览器</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (navigator.userAgent.indexOf(<span class="string">"Chrome"</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">    fileUrlDownload(imgUrl, imgName); <span class="comment">// Chrome内核浏览器</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    aLinkDownload(imgUrl, imgName);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：download 由于浏览器安全策略不支持跨域</span></span><br><span class="line"><span class="comment">// 接口返回文件流 chrome 浏览器会识别不了类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aLinkDownload</span>(<span class="params">url, imgName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">  <span class="keyword">let</span> event = <span class="keyword">new</span> MouseEvent(<span class="string">"click"</span>);</span><br><span class="line">  a.href = url;</span><br><span class="line">  <span class="keyword">if</span> (imgName) &#123;</span><br><span class="line">    a.download = imgName + <span class="string">".jpg"</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    a.download = <span class="string">"down_load.jpg"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// a.click();火狐浏览器不触发</span></span><br><span class="line">  a.dispatchEvent(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载文件流的方式 火狐浏览器会默认XML格式，无法定义文件类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fileUrlDownload</span>(<span class="params">url, imgName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(url, itemData);</span><br><span class="line">  <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  xhr.responseType = <span class="string">"blob"</span>; <span class="comment">// 返回类型blob</span></span><br><span class="line">  xhr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 定义请求完成的处理函数</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> blob = <span class="keyword">this</span>.response;</span><br><span class="line">      <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">      reader.readAsDataURL(blob); <span class="comment">// 转换为base64，可以直接放入a标签href</span></span><br><span class="line">      reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> str = e.target.result;</span><br><span class="line">        <span class="keyword">var</span> type = str.substring(str.indexOf(<span class="string">"/"</span>) + <span class="number">1</span>, str.indexOf(<span class="string">";"</span>));</span><br><span class="line">        <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>); <span class="comment">// 转换完成，创建一个a标签用于下载</span></span><br><span class="line">        <span class="keyword">let</span> event = <span class="keyword">new</span> MouseEvent(<span class="string">"click"</span>);</span><br><span class="line">        <span class="keyword">if</span> (imgName) &#123;</span><br><span class="line">          a.download = imgName + <span class="string">"."</span> + type;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          a.download = <span class="string">"down_load.jpg"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        a.href = e.target.result;</span><br><span class="line">        a.dispatchEvent(event);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">504</span>) &#123;</span><br><span class="line">      alert(<span class="string">"导出失败，请求超时"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">"导出失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  xhr.open(<span class="string">"get"</span>, url, <span class="literal">true</span>);</span><br><span class="line">  <span class="comment">//此处为兼容后端中间件，设置请求头，文件格式</span></span><br><span class="line">  xhr.setRequestHeader(</span><br><span class="line">    <span class="string">"Accept"</span>,</span><br><span class="line">    <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3"</span></span><br><span class="line">  );</span><br><span class="line">  xhr.send();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过canvas转换</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">imageCanvasAlink</span>(<span class="params">src, imgName</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通过Images对象</span></span><br><span class="line">  <span class="keyword">let</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">  image.setAttribute(<span class="string">"crossOrigin"</span>, <span class="string">"anonymous"</span>);</span><br><span class="line">  image.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line">    canvas.width = image.width;</span><br><span class="line">    canvas.height = image.height;</span><br><span class="line">    <span class="keyword">let</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>, image.width, image.height);</span><br><span class="line">    <span class="comment">// window.navigator.msSaveBlob(canvas.msToBlob(), 'image.jpg');</span></span><br><span class="line">    <span class="keyword">let</span> url = canvas.toDataURL(<span class="string">"image/png"</span>);</span><br><span class="line">    <span class="keyword">let</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">    <span class="keyword">let</span> event = <span class="keyword">new</span> MouseEvent(<span class="string">"click"</span>);</span><br><span class="line">    <span class="keyword">if</span> (imgName) &#123;</span><br><span class="line">      a.download = imgName + <span class="string">".jpg"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      a.download = <span class="string">"down_load.jpg"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    a.href = url;</span><br><span class="line">    <span class="comment">// 触发a的单击事件</span></span><br><span class="line">    a.dispatchEvent(event);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 获取img上的src值，赋值之后，完成之后会调用 onload事件</span></span><br><span class="line">  image.src = src;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://github.com/Chalarangelo/30-seconds-of-code" target="_blank" rel="noopener">30-seconds-of-code</a></li>
<li><a href="/resource/js/browser.js">检查浏览器环境</a></li>
<li><a href="/resource/js/storage.js">storage Utils</a></li>
<li><a href="/resource/js/validator.js">常用正则</a></li>
<li><a href="/resource/js/prototyp-js-Util.js">原生对象方法</a></li>
<li><a href="/resource/js/js-sort.js">js 常用排序算法</a></li>
<li><a href="/resource/js/RN-CommonUtil.js">react-native Utils</a></li>
<li><a href="https://chensd.com/2015-01/45-useful-javascript-tips-tricks-and-best-practices.html" target="_blank" rel="noopener">JavaScript 奇技淫巧 44 招</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/js/" rel="tag"># js</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/front-end/web/2017-04-24-mobile-flex-dpr/" rel="prev" title="移动端高清适配方案">
      <i class="fa fa-chevron-left"></i> 移动端高清适配方案
    </a></div>
      <div class="post-nav-item">
    <a href="/tools/git/" rel="next" title="Git 常用命令">
      Git 常用命令 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript-常用代码片段"><span class="nav-number">1.</span> <span class="nav-text">JavaScript 常用代码片段</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#document-ready"><span class="nav-number">2.</span> <span class="nav-text">document ready</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTML5-图片压缩-或使用localResizeIMG"><span class="nav-number">3.</span> <span class="nav-text">HTML5 图片压缩 或使用localResizeIMG</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-获取-search-参数"><span class="nav-number">4.</span> <span class="nav-text">js 获取 search 参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获得-URL-中-GET-参数值"><span class="nav-number">5.</span> <span class="nav-text">获得 URL 中 GET 参数值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#阻止事件冒泡"><span class="nav-number">6.</span> <span class="nav-text">阻止事件冒泡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-自定义事件-参考"><span class="nav-number">7.</span> <span class="nav-text">js 自定义事件 参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-高精度计算"><span class="nav-number">8.</span> <span class="nav-text">js 高精度计算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据生日计算星座"><span class="nav-number">9.</span> <span class="nav-text">根据生日计算星座</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算年龄"><span class="nav-number">10.</span> <span class="nav-text">计算年龄</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#格式化-Date-建议使用-moment"><span class="nav-number">11.</span> <span class="nav-text">格式化 Date (建议使用 moment)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Date-diff"><span class="nav-number">12.</span> <span class="nav-text">Date diff</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#截取字符串并支持emoji"><span class="nav-number">13.</span> <span class="nav-text">截取字符串并支持emoji</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成-UUID"><span class="nav-number">14.</span> <span class="nav-text">生成 UUID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成-4-位-id"><span class="nav-number">15.</span> <span class="nav-text">生成 4 位 id</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-对象深拷贝"><span class="nav-number">16.</span> <span class="nav-text">js 对象深拷贝</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#返回指定范围的随机数-m-n-之间-的公式"><span class="nav-number">17.</span> <span class="nav-text">返回指定范围的随机数(m-n 之间)的公式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机数时间戳"><span class="nav-number">18.</span> <span class="nav-text">随机数时间戳</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#防止被-Iframe-嵌套"><span class="nav-number">19.</span> <span class="nav-text">防止被 Iframe 嵌套</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS，Safari-浏览器，input-等表单-focus-后-fixed-元素错位问题"><span class="nav-number">20.</span> <span class="nav-text">iOS，Safari 浏览器，input 等表单 focus 后 fixed 元素错位问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#得到地理位置"><span class="nav-number">21.</span> <span class="nav-text">得到地理位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取-js-所在路径"><span class="nav-number">22.</span> <span class="nav-text">获取 js 所在路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从全局捕获错误"><span class="nav-number">23.</span> <span class="nav-text">从全局捕获错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转义-html-标签"><span class="nav-number">24.</span> <span class="nav-text">转义 html 标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cookie-操作"><span class="nav-number">25.</span> <span class="nav-text">cookie 操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#加载样式文件表"><span class="nav-number">26.</span> <span class="nav-text">加载样式文件表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#返回脚本内容"><span class="nav-number">27.</span> <span class="nav-text">返回脚本内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#清除脚本内容"><span class="nav-number">28.</span> <span class="nav-text">清除脚本内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动态加载脚本文件"><span class="nav-number">29.</span> <span class="nav-text">动态加载脚本文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#检验-URL-链接是否有效"><span class="nav-number">30.</span> <span class="nav-text">检验 URL 链接是否有效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取页面高度"><span class="nav-number">31.</span> <span class="nav-text">获取页面高度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#返回顶部的通用方法"><span class="nav-number">32.</span> <span class="nav-text">返回顶部的通用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组去重"><span class="nav-number">33.</span> <span class="nav-text">数组去重</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按字典顺序，对每行进行数组排序"><span class="nav-number">34.</span> <span class="nav-text">按字典顺序，对每行进行数组排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串反序输出"><span class="nav-number">35.</span> <span class="nav-text">字符串反序输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#金额大写转换函数"><span class="nav-number">36.</span> <span class="nav-text">金额大写转换函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTML5-全屏"><span class="nav-number">37.</span> <span class="nav-text">HTML5 全屏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-获取验证码倒计时效果"><span class="nav-number">38.</span> <span class="nav-text">js 获取验证码倒计时效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#加入收藏夹代码"><span class="nav-number">39.</span> <span class="nav-text">加入收藏夹代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-绑定事件-适用于任何浏览器的元素绑定"><span class="nav-number">40.</span> <span class="nav-text">js 绑定事件 适用于任何浏览器的元素绑定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取当前点击事件的-Object-对象"><span class="nav-number">41.</span> <span class="nav-text">获取当前点击事件的 Object 对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按-Ctrl-Entert-直接提交表单"><span class="nav-number">42.</span> <span class="nav-text">按 Ctrl + Entert 直接提交表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JS-弹出新窗口全屏"><span class="nav-number">43.</span> <span class="nav-text">JS 弹出新窗口全屏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JS-继承的实现方式-参考"><span class="nav-number">44.</span> <span class="nav-text">JS 继承的实现方式 参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#H5-页检测手机是否安装-app-相关流程-参考"><span class="nav-number">45.</span> <span class="nav-text">H5 页检测手机是否安装 app 相关流程 参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取滚动位置"><span class="nav-number">46.</span> <span class="nav-text">获取滚动位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#滚动到顶部"><span class="nav-number">47.</span> <span class="nav-text">滚动到顶部</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#柯里化函数"><span class="nav-number">48.</span> <span class="nav-text">柯里化函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#js-判断是否含有-emoij"><span class="nav-number">49.</span> <span class="nav-text">js 判断是否含有 emoij</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#树状结构转-list"><span class="nav-number">50.</span> <span class="nav-text">树状结构转 list</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#解决事件快速点击"><span class="nav-number">51.</span> <span class="nav-text">解决事件快速点击</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#canvas-动态获取字体大小"><span class="nav-number">52.</span> <span class="nav-text">canvas 动态获取字体大小</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#px-pt互转"><span class="nav-number">53.</span> <span class="nav-text">px pt互转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#px-vw-互转"><span class="nav-number">54.</span> <span class="nav-text">px vw 互转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进制转换"><span class="nav-number">55.</span> <span class="nav-text">进制转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unicode-转换"><span class="nav-number">56.</span> <span class="nav-text">unicode 转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#节流-去抖-（建议使用-Lodash-js-或-Underscore-js）"><span class="nav-number">57.</span> <span class="nav-text">节流&#x2F;去抖 （建议使用 Lodash.js 或 Underscore.js）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组平均数"><span class="nav-number">58.</span> <span class="nav-text">数组平均数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#大写每个单词的首字母"><span class="nav-number">59.</span> <span class="nav-text">大写每个单词的首字母</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#首字母大写"><span class="nav-number">60.</span> <span class="nav-text">首字母大写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计数数组中值的出现次数"><span class="nav-number">61.</span> <span class="nav-text">计数数组中值的出现次数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组之间的区别"><span class="nav-number">62.</span> <span class="nav-text">数组之间的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组之间的相似性"><span class="nav-number">63.</span> <span class="nav-text">数组之间的相似性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转义正则表达式"><span class="nav-number">64.</span> <span class="nav-text">转义正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#阶乘"><span class="nav-number">65.</span> <span class="nav-text">阶乘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#斐波那契数组生成器"><span class="nav-number">66.</span> <span class="nav-text">斐波那契数组生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过滤数组中的非唯一值"><span class="nav-number">67.</span> <span class="nav-text">过滤数组中的非唯一值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flatten-数组"><span class="nav-number">68.</span> <span class="nav-text">Flatten 数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从数组中获取最大值和最小值"><span class="nav-number">69.</span> <span class="nav-text">从数组中获取最大值和最小值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#最大公约数（GCD）"><span class="nav-number">70.</span> <span class="nav-text">最大公约数（GCD）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用-range-初始化数组"><span class="nav-number">71.</span> <span class="nav-text">用 range 初始化数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用值初始化数组"><span class="nav-number">72.</span> <span class="nav-text">用值初始化数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试功能所花费的时间"><span class="nav-number">73.</span> <span class="nav-text">测试功能所花费的时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按字符串排序（按字母顺序排列）"><span class="nav-number">74.</span> <span class="nav-text">按字符串排序（按字母顺序排列）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#来自键值对的对象"><span class="nav-number">75.</span> <span class="nav-text">来自键值对的对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管道"><span class="nav-number">76.</span> <span class="nav-text">管道</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Powerset"><span class="nav-number">77.</span> <span class="nav-text">Powerset</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机化数组的顺序"><span class="nav-number">78.</span> <span class="nav-text">随机化数组的顺序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RGB-到十六进制"><span class="nav-number">79.</span> <span class="nav-text">RGB 到十六进制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打开新窗口"><span class="nav-number">80.</span> <span class="nav-text">打开新窗口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scroll-to"><span class="nav-number">81.</span> <span class="nav-text">scroll to</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下载图片的几种方式"><span class="nav-number">82.</span> <span class="nav-text">下载图片的几种方式</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Richard"
      src="https://avatars3.githubusercontent.com/u/18113256?v=3&s=460">
  <p class="site-author-name" itemprop="name">Richard</p>
  <div class="site-description" itemprop="description">惶者生存，偏执者成功</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">132</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xinlc" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xinlc" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/xinlc" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;xinlc" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://learnxinyminutes.com/" title="https:&#x2F;&#x2F;learnxinyminutes.com" rel="noopener" target="_blank">Learn X in Y minutes</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://justjavac.com/" title="http:&#x2F;&#x2F;justjavac.com" rel="noopener" target="_blank">justjavac</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.ruanyifeng.com/blog/" title="http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;blog&#x2F;" rel="noopener" target="_blank">阮一峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.liaoxuefeng.com/" title="https:&#x2F;&#x2F;www.liaoxuefeng.com" rel="noopener" target="_blank">廖雪峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tech.meituan.com/" title="https:&#x2F;&#x2F;tech.meituan.com" rel="noopener" target="_blank">美团技术</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.v2ex.com/" title="https:&#x2F;&#x2F;www.v2ex.com" rel="noopener" target="_blank">V2EX</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://caniuse.com/" title="https:&#x2F;&#x2F;caniuse.com" rel="noopener" target="_blank">caniuse/工具</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.css88.com/nav/" title="http:&#x2F;&#x2F;www.css88.com&#x2F;nav&#x2F;" rel="noopener" target="_blank">css88/doc</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://overapi.com/" title="http:&#x2F;&#x2F;overapi.com&#x2F;" rel="noopener" target="_blank">OverAPI/api</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://devdocs.io/" title="http:&#x2F;&#x2F;devdocs.io&#x2F;" rel="noopener" target="_blank">DevDocs/api</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://tool.oschina.net/" title="http:&#x2F;&#x2F;tool.oschina.net&#x2F;" rel="noopener" target="_blank">在线工具/索引</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://tool.lu/" title="http:&#x2F;&#x2F;tool.lu&#x2F;" rel="noopener" target="_blank">ToolBox</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://hao.shejidaren.com/" title="http:&#x2F;&#x2F;hao.shejidaren.com&#x2F;" rel="noopener" target="_blank">设计导航</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

</body>
</html>
